# ------------------------------------------------------------------------------
# kube-prometheus-stack values (GitOps-friendly)
# ------------------------------------------------------------------------------
grafana:
  enabled: true

  # Expose Grafana in the lab
  service:
    type: NodePort
    nodePort: 30030

  # (lector requirement) Run Grafana as StatefulSet
  useStatefulSet: true

  # Keep admin password stable across redeploys/syncs:
  # store it in a Secret (created once, not committed in Git)
  adminUser: admin
  admin:
    existingSecret: grafana-admin
    userKey: admin-user
    passwordKey: admin-password
  # These keys/structure are supported by Grafana Helm chart values. :contentReference[oaicite:0]{index=0}

  # Persist Grafana data (dashboards DB, plugins, users, etc.)
  persistence:
    enabled: true
    type: pvc
    size: 5Gi
    storageClassName: local-path   # common default on k3s; verify with kubectl get storageclass
    accessModes:
      - ReadWriteOnce
  # Persistence values are standard for Grafana chart and also used via kube-prometheus-stack. :contentReference[oaicite:1]{index=1}

  # Ensure dashboards from ConfigMaps are loaded (you already have CM dashboards)
  sidecar:
    dashboards:
      enabled: true
      label: grafana_dashboard
      searchNamespace: monitoring

prometheus:
  enabled: true

alertmanager:
  enabled: true